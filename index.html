<html>
<head>
  <meta charset="UTF-8" />
  <title>Jogo Ace Attorney</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="ace">
    <div class="jogo">
      <div id="personagem">
        <img id="retrato" src="imagens/personagem1.png" alt="Personagem" />
      </div>
      <div id="dialogo">
        <p id="nome">Personagem</p>
        <p id="texto">Texto do diálogo vai aqui.</p>
      </div>
      <div id="opções" class="opções">
        <button id="evidence" class="evidence">ola </button>
        <button id="objection"></button>
      </div>
      <button id="proximo">Próximo</button>
    </div>
  </div>

  <script>

const cenas = [
  {
    nome: "Taylor Swift",
    texto: "Eu sou a melhor cantora!",
    retrato: "https://upload.wikimedia.org/wikipedia/commons/thumb/d/d7/Taylor_Swift_at_the_2023_MTV_Video_Music_Awards_4.png/1200px-Taylor_Swift_at_the_2023_MTV_Video_Music_Awards_4.png",
    button: "false"
  },
  {
    nome: "QueenB",
    texto: "Não, eu sou!!",
    retrato: "https://www.usatoday.com/gcdn/authoring/authoring-images/2025/05/02/USAT/83419857007-006-20250428-cct-la-dakdouk-web.jpg?crop=1018,573,x295,y647&width=660&height=371&format=pjpg&auto=webp",
    button: ""
  },
  {
    nome: "Juíza Olivia",
    texto: "Ordem no tribunal!!",
    retrato: "https://s2-quem.glbimg.com/UphChr6TuKtExSXPu0Pr1By7eMI=/0x0:1400x950/888x0/smart/filters:strip_icc()/i.s3.glbimg.com/v1/AUTH_b0f0e84207c948ab8b8777be5a6a4395/internal_photos/bs/2024/1/1/hRNpMMSpe7zbtbfbXPIA/olivia-rodrigo.jpg",
  },
  {
    nome: "Juiza OLivia",
    texto: "Advogada da Senhora Taylor, se pronuncie",
    retrato: "https://s2-quem.glbimg.com/UphChr6TuKtExSXPu0Pr1By7eMI=/0x0:1400x950/888x0/smart/filters:strip_icc()/i.s3.glbimg.com/v1/AUTH_b0f0e84207c948ab8b8777be5a6a4395/internal_photos/bs/2024/1/1/hRNpMMSpe7zbtbfbXPIA/olivia-rodrigo.jpg",
  },
  {
    nome: "Sabrina",
    texto: "Boa tarde, juiza, sou a advogada da senhora Taylor Swift",
    retrato: "https://billboard-com-br.s3.amazonaws.com/wp-content/uploads/2025/03/06185618/Sabrina-Carpenter-previa-nova-musica.jpg",
    options: [
    {
        texto: "Apresentar Evidência",
        acao: () => escolherCena(6)  
    },
    {
        texto: "Apresentar Evidência",
        acao: () => escolherCena(7)  
    }
    ]
  },
  {
    nome: "Sabrina",
    texto: "Essa é a Evidência",
    retrato: "https://billboard-com-br.s3.amazonaws.com/wp-content/uploads/2025/03/06185618/Sabrina-Carpenter-previa-nova-musica.jpg"
  },
  {
    nome: "Sabrina",
    texto: "Essa é a Objeção",
    retrato: "https://billboard-com-br.s3.amazonaws.com/wp-content/uploads/2025/03/06185618/Sabrina-Carpenter-previa-nova-musica.jpg"
  },   
  { 
    nome: "OLivia",
    texto: "!!!!!!!!!!!!!!!!!",
    retrato: "https://s2-quem.glbimg.com/UphChr6TuKtExSXPu0Pr1By7eMI=/0x0:1400x950/888x0/smart/filters:strip_icc()/i.s3.glbimg.com/v1/AUTH_b0f0e84207c948ab8b8777be5a6a4395/internal_photos/bs/2024/1/1/hRNpMMSpe7zbtbfbXPIA/olivia-rodrigo.jpg"
  },
];

let indiceCena = 0;
let sequenciaCenas = [];
let cena = []; // Aqui você deve carregar as cenas antes de usar

const nomeEl = document.getElementById("nome");
const textoEl = document.getElementById("texto");
const retratoEl = document.getElementById("retrato");
const fundoEl = document.getElementById("fundo");
const btnProximo = document.getElementById("proximo");

const opçõesEl = document.getElementById("opções");
const evidence = document.getElementById("evidence");
const objection = document.getElementById("objection");

const listaCenasDiv = document.getElementById("listaCenas");

// Função para mostrar a cena atual
function mostrarCena() {
  const cena = cenas[indiceCena];
  if (!cena) return;
  nomeEl.textContent = cena.nome;
  textoEl.textContent = cena.texto;
  retratoEl.src = cena.retrato;
  fundoEl.src = cena.fundo;

  if (cena.options){
    document.getElementById("evidence").style.display = "block"
  }
}

// Botão "Próximo"
btnProximo.addEventListener("click", () => {
  indiceCena++;
  if (indiceCena < cenas.length) {
    mostrarCena();
  } else {
    textoEl.textContent = "Fim da demo.";
    btnProximo.disabled = true;
  }
});

// Função para exibir lista de cenas na tela
async function exibirCenas() {
  listaCenasDiv.innerHTML = "Carregando cenas...";
  try {
    const dadosCenas = await getCenas(); // Função que retorna um array de cenas
    listaCenasDiv.innerHTML = "";
    cenas = dadosCenas; // Salva as cenas carregadas

    dadosCenas.forEach(cena => {
      const sceneDiv = document.createElement("div");
      sceneDiv.classList.add("scene");

      sceneDiv.innerHTML = `
        <img src="${cena.retrato}" alt="${cena.nome}">
        <div class="scene-details">
          <h3>${cena.nome}</h3>
          <p>${cena.texto}</p>
        </div>
      `;
      listaCenasDiv.appendChild(sceneDiv);
    });

    // Mostra a primeira cena carregada
    indiceCena = 0;
    mostrarCena();
  } catch (error) {
    listaCenasDiv.innerHTML = "Erro ao carregar cenas.";
    console.error(error);
  }
}

// Escolher uma cena específica e pular as outras
function escolherCena(indiceCenaEscolhida) {
  const cenasRestantes = cenas.slice(indiceCenaEscolhida + 1);
  sequenciaCenas = [
    indiceCenaEscolhida,
    ...cenasRestantes.map((_, i) => indiceCenaEscolhida + 1 + i)
  ];
  indiceCena = 0;
  mostrarCena();
}

// Evento para carregar cenas
document.getElementById("carregarCenas").addEventListener("click", exibirCenas);

// Opcional: carregar cenas ao abrir a página
// window.onload = exibirCenas;


  </script>
</body>
</html>
